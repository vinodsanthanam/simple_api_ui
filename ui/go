#!/bin/bash
echo "Usage:"
echo "./go -watch -- to watch for files"
echo "./go -start port -- to start local server for specific environment, defaults to dev"
echo "./go -docker -- to run the app in docker container on port 5000"
echo ""

npm install
bower install
rm -rf public
./node_modules/.bin/grunt 

if [ "$1" = "-watch" ]; then
  ./node_modules/.bin/grunt watch
elif [ "$1" = "-start" ]; then
    if [ "$2" != "" ]; then
      export ui_environment=$2
    else
      export ui_environment=dev
    fi
    export ui_port=5001
    npm start
fi

if [ "$1" = "-docker" ]; then
  docker build -t vinodsanthanam/ui .
  docker run -p 5000:5000 --env ui_port=5000 --env ui_environment=docker-dev -d vinodsanthanam/ui 
fi
